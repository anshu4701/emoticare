{% extends 'base.html' %}
{% block content %}

<h2>Log Your Mood</h2>

<form method="POST" id="moodForm">
    <label>Select Mood:</label><br>
    <div class="mood-buttons">
        <button type="button" data-mood="Happy" class="happy">ðŸ˜Š Happy</button>
        <button type="button" data-mood="Sad" class="sad">ðŸ˜¢ Sad</button>
        <button type="button" data-mood="Angry" class="angry">ðŸ˜  Angry</button>
        <button type="button" data-mood="Anxious" class="anxious">ðŸ˜° Anxious</button>
        <button type="button" data-mood="Excited" class="excited">ðŸ˜„ Excited</button>
    </div>

    <!-- Hidden field to store mood choice -->
    <input type="hidden" name="mood" id="selectedMood" required><br><br>

    <label>Tags (optional):</label><br>
    <input type="text" name="tags" placeholder="e.g., exams, work, family"><br><br>

    <button type="submit">Submit</button>
    <div id="moodSuggestion" class="mood-suggestion hidden"></div>
</form>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const moodButtons = document.querySelectorAll(".mood-buttons button");
    const hiddenInput = document.getElementById("selectedMood");

    moodButtons.forEach(btn => {
        btn.addEventListener("click", () => {
            moodButtons.forEach(b => b.classList.remove("selected"));
            btn.classList.add("selected");
            hiddenInput.value = btn.dataset.mood;
        });
    });

    document.getElementById("moodForm").addEventListener("submit", (e) => {
        if (!hiddenInput.value) {
            alert("Please select a mood before submitting.");
            e.preventDefault();
        }
    });
});

document.addEventListener("DOMContentLoaded", () => {
    const moodButtons = document.querySelectorAll(".mood-buttons button");
    const hiddenInput = document.getElementById("selectedMood");
    const suggestionBox = document.getElementById("moodSuggestion");

    const moodTips = {
        Happy: "ðŸ˜Š Stay in the moment and spread the joy!",
        Sad: "ðŸ’™ Try journaling or listening to calming music.",
        Angry: "ðŸ˜  Take a deep breath and step outside for fresh air.",
        Anxious: "ðŸ˜° Practice deep breathing or a short meditation.",
        Excited: "ðŸ˜„ Capture your thoughts in a journal or share with a friend!"
    };

    moodButtons.forEach(btn => {
        btn.addEventListener("click", () => {
            moodButtons.forEach(b => b.classList.remove("selected"));
            btn.classList.add("selected");
            hiddenInput.value = btn.dataset.mood;

            // Show suggestion
            const mood = btn.dataset.mood;
            suggestionBox.classList.remove("hidden");
            suggestionBox.innerText = moodTips[mood] || "You're doing great!";
        });
    });
});

</script>

{% endblock %}
